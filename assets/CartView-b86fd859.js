import{h as f,a as g,d as b}from"./firebaseConfig-43041049.js";import{_ as y,r as C,o as i,c as u,a as t,F as m,d as N,t as c,h as s,i as a,b as S,w as v,f as _}from"./index-fdcd7206.js";const D={data(){return{orderDetail:{contactInfo:{contactName:"",contactMail:"",contactPhone:"",contactAddress:"",contactNote:""},orderList:[],isPay:!1,isSend:!1},localStorageCart:[]}},methods:{getCart(){let l=localStorage.getItem("cart");this.localStorageCart=JSON.parse(l)},removeFromCart(l){console.log(l),this.localStorageCart.splice(l,1),localStorage.setItem("cart",JSON.stringify(this.localStorageCart)),this.getCart()},changeQty(){localStorage.setItem("cart",JSON.stringify(this.localStorageCart)),this.getCart()},async sendOrder(){this.orderDetail.orderList=this.localStorageCart;const l=this.orderDetail;await f(g(b,"orderList",this.orderDetail.contactInfo.contactName),l),console.log("訂購成功"),alert("訂單送出成功！"),this.orderDetail={contactInfo:{contactName:"",contactMail:"",contactPhone:"",contactAddress:"",contactNote:""}},this.localStorageCart=[],localStorage.removeItem("cart"),console.log(localStorage)}},computed:{totalQty(){if(this.localStorageCart)return this.localStorageCart.reduce((l,o)=>l+Number(o.qty),0)},totalPrice(){if(this.localStorageCart)return this.localStorageCart.reduce((l,o)=>l+o.price*Number(o.qty),0)}},created(){this.getCart()}},I=t("section",{class:"container-fluid fluid-img-bg my-4 py-16 py-md-18 my-md-8"},null,-1),x={class:"container mb-5"},w=t("h2",{class:"text-center"},"購物車填資料頁面",-1),V={class:"table table-hover text-center align-middle"},P=t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",{style:{width:"15%"}},"照片"),t("th",null,"單價"),t("th",{style:{width:"10%"}},"數量"),t("th",null,"金額"),t("th",null,"刪除")])],-1),M=["src"],U=["onUpdate:modelValue"],k=["onClick"],A=t("i",{class:"bi bi-trash"},null,-1),q={colspan:"3"},O={colspan:"3"},F=t("hr",null,null,-1),L=t("h5",null,"收件人資訊：",-1),Q={class:"row"},B={class:"col-12 col-md-6"},J={class:"mb-3"},T=t("label",{for:"orderpersonName",class:"ms-1 form-label"}," 訂購人姓名： ",-1),j={class:"col-12 col-md-6"},E=t("label",{for:"orderpersonMail",class:"ms-1 form-label"}," 訂購人電子信箱： ",-1),z={class:"col-12 col-md-6"},G=t("label",{for:"orderpersonPhone",class:"ms-1 form-label"}," 訂購人聯絡電話： ",-1),H={class:"col-12 col-md-6"},K=t("label",{for:"orderpersonAddress",class:"ms-1 form-label"}," 訂購人聯絡地址： ",-1),R={class:"col-12"},W=t("label",{for:"orderpersonNote",class:"ms-1 form-label"}," 訂購備註： ",-1),X=t("hr",null,null,-1),Y={class:"row justify-content-center"},Z={class:"col-6"},$=t("i",{class:"bi bi-arrow-return-left"},null,-1),tt={class:"col-6 text-end"};function ot(l,o,et,lt,r,n){const p=C("router-link");return i(),u(m,null,[I,t("div",x,[w,t("table",V,[P,t("tbody",null,[(i(!0),u(m,null,N(r.localStorageCart,(e,h)=>(i(),u("tr",{key:"storage"+h},[t("td",null,c(e.title),1),t("td",null,[t("img",{class:"fluid-img-cover",src:e.img,alt:""},null,8,M)]),t("td",null,c(e.price),1),t("td",null,[s(t("input",{class:"form-control",type:"number","onUpdate:modelValue":d=>e.qty=d,onChange:o[0]||(o[0]=d=>n.changeQty())},null,40,U),[[a,e.qty]])]),t("td",null,c(e.price*e.qty),1),t("td",null,[t("button",{class:"btn btn-danger",onClick:d=>n.removeFromCart(h)},[A,_(" 刪除 ")],8,k)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",q,"總共 "+c(n.totalQty)+" 件商品",1),t("td",O,"金額總計 "+c(n.totalPrice)+" 元",1)])])]),F,L,t("div",Q,[t("div",B,[t("div",J,[T,s(t("input",{type:"name","onUpdate:modelValue":o[1]||(o[1]=e=>r.orderDetail.contactInfo.contactName=e),class:"form-control",id:"orderpersonName",placeholder:"請輸入姓名..."},null,512),[[a,r.orderDetail.contactInfo.contactName]])])]),t("div",j,[E,s(t("input",{type:"email","onUpdate:modelValue":o[2]||(o[2]=e=>r.orderDetail.contactInfo.contactMail=e),class:"form-control",id:"orderpersonMail",placeholder:"請輸入電子信箱..."},null,512),[[a,r.orderDetail.contactInfo.contactMail]])]),t("div",z,[G,s(t("input",{type:"phone","onUpdate:modelValue":o[3]||(o[3]=e=>r.orderDetail.contactInfo.contactPhone=e),class:"form-control",id:"orderpersonPhone",placeholder:"請輸入聯絡電話..."},null,512),[[a,r.orderDetail.contactInfo.contactPhone]])]),t("div",H,[K,s(t("input",{type:"address","onUpdate:modelValue":o[4]||(o[4]=e=>r.orderDetail.contactInfo.contactAddress=e),class:"form-control",id:"orderpersonAddress",placeholder:"請輸入寄件地址..."},null,512),[[a,r.orderDetail.contactInfo.contactAddress]])]),t("div",R,[W,s(t("textarea",{"onUpdate:modelValue":o[5]||(o[5]=e=>r.orderDetail.contactInfo.contactNote=e),class:"form-control",name:"orderpersonNote",id:"orderpersonNote",cols:"",rows:"6"},null,512),[[a,r.orderDetail.contactInfo.contactNote]])])]),X,t("div",Y,[t("p",Z,[S(p,{to:"/products",class:"text-decoration-none text-primary"},{default:v(()=>[$,_(" 繼續購物 ")]),_:1})]),t("p",tt,[t("button",{onClick:o[6]||(o[6]=e=>n.sendOrder()),type:"button",class:"btn btn-primary text-white"},"送出訂單")])])])],64)}const at=y(D,[["render",ot]]);export{at as default};
