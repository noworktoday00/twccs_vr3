import{g as m,c as D,a as v,b as k,h as w,d as _}from"./firebaseConfig-43041049.js";import{_ as g,o as a,c as n,a as t,F as h,d as b,t as l,f as i,h as f,l as y}from"./index-08e5645d.js";const x={data(){return{orderList:[],orderDetail:{contactInfo:{contactName:"",contactPhone:"",contactMail:"",contactAddress:"",contactNote:""},orderList:[],isPay:!1,isSend:!1},newOrder:[],isPayOrder:[],isSendOrder:[]}},methods:{async getOrders(){(await m(D(_,"orderList"))).forEach(o=>{this.orderList.push(o.data())}),this.orderList.forEach((o,u)=>{!o.isPay&&!o.isSend&&this.newOrder.push(o),o.isPay&&!o.isSend&&this.isPayOrder.push(o),o.isSend&&this.isSendOrder.push(o)})},async viewDetail(c){const o=v(_,"orderList",`${c}`),u=await k(o);u.exists()?this.orderDetail=u.data():console.log("No such document!")},async uploadOrder(){const c=this.orderDetail;await w(v(_,"orderList",this.orderDetail.contactInfo.contactName),c),alert("更新訂單成功！"),this.orderList=[],this.newOrder=[],this.isPayOrder=[],this.isSendOrder=[],this.getOrders()}},computed:{totalQty(){return this.orderDetail.orderList.reduce((c,o)=>c+o.qty,0)},totalPrice(){return this.orderDetail.orderList.reduce((c,o)=>c+o.price*o.qty,0)}},mounted(){this.getOrders()}},I=t("div",{class:"row mb-2"},[t("div",{class:"col-10"},[t("h4",{class:""},"訂單列表：未處理訂單 -> 已付款訂單 -> 已寄出訂單")])],-1),O=t("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link text-dark active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"未處理訂單")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link text-dark",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"},"已付款訂單")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link text-dark",id:"contact-tab","data-bs-toggle":"tab","data-bs-target":"#contact",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"},"已寄出訂單")])],-1),P={class:"tab-content",id:"myTabContent"},S={class:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},C={class:"table table-hover text-center align-middle"},L=t("thead",null,[t("tr",null,[t("th",{style:{width:"10%"}},"姓名"),t("th",{style:{width:"15%"}},"電話"),t("th",{style:{width:"20%"}},"email"),t("th",{style:{width:"15%"}},"訂單明細")])],-1),N=["onClick"],M={class:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"},q={class:"table table-hover text-center align-middle"},V=t("thead",null,[t("tr",null,[t("th",{style:{width:"10%"}},"姓名"),t("th",{style:{width:"15%"}},"電話"),t("th",{style:{width:"20%"}},"email"),t("th",{style:{width:"15%"}},"訂單明細")])],-1),j=["onClick"],B={class:"tab-pane fade",id:"contact",role:"tabpanel","aria-labelledby":"contact-tab"},E={class:"table table-hover text-center align-middle"},T=t("thead",null,[t("tr",null,[t("th",{style:{width:"10%"}},"姓名"),t("th",{style:{width:"15%"}},"電話"),t("th",{style:{width:"20%"}},"email"),t("th",{style:{width:"15%"}},"訂單明細")])],-1),U=["onClick"],A={class:"modal fade",id:"orderDetail",tabindex:"-1","aria-labelledby":"orderDetailLabel","aria-hidden":"true"},F={class:"modal-dialog modal-lg"},Q={class:"modal-content"},R=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"orderDetailLabel"},"訂單資訊"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),z={class:"modal-body"},G=t("p",null,"訂單詳細資訊",-1),H=t("p",null,"聯絡人資訊",-1),J={class:"row justify-content-around"},K={class:"col-4"},W={class:"col-6"},X={class:"row justify-content-around"},Y={class:"col-4"},Z=t("br",null,null,-1),$={class:"col-6"},tt=t("br",null,null,-1),et={class:"row justify-content-around"},ot={class:"col-12"},lt=t("br",null,null,-1),st=t("hr",null,null,-1),at={class:"table table-hover text-center align-middle"},nt=t("thead",null,[t("tr",null,[t("th",null,"商品名稱"),t("th",null,"數量"),t("th",null,"金額"),t("th",null,"小計")])],-1),ct={colspan:"2"},dt={colspan:"2"},it=t("hr",null,null,-1),rt={class:"row justify-content-around"},ht={class:"col-4"},ut={class:"form-check"},bt=t("label",{class:"form-check-label",for:"flexCheckDefault"}," 是否確認付款 ",-1),_t={class:"col-4"},ft={class:"form-check"},yt=t("label",{class:"form-check-label",for:"flexCheckDefault"}," 是否完成寄出 ",-1),pt={class:"modal-footer"},vt=t("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal"},"關閉",-1);function mt(c,o,u,Dt,s,r){return a(),n(h,null,[I,O,t("div",P,[t("div",S,[t("table",C,[L,t("tbody",null,[(a(!0),n(h,null,b(s.newOrder,(e,d)=>(a(),n("tr",{key:d+"order"},[t("td",null,l(e.contactInfo.contactName),1),t("td",null,l(e.contactInfo.contactPhone),1),t("td",null,l(e.contactInfo.contactMail),1),t("td",null,[t("button",{type:"button",class:"btn btn-success text-white","data-bs-toggle":"modal","data-bs-target":"#orderDetail",onClick:p=>r.viewDetail(e.contactInfo.contactName)}," 查看明細 ",8,N)])]))),128))])])]),t("div",M,[t("table",q,[V,t("tbody",null,[(a(!0),n(h,null,b(s.isPayOrder,(e,d)=>(a(),n("tr",{key:d+"order"},[t("td",null,l(e.contactInfo.contactName),1),t("td",null,l(e.contactInfo.contactPhone),1),t("td",null,l(e.contactInfo.contactMail),1),t("td",null,[t("button",{type:"button",class:"btn btn-success text-white","data-bs-toggle":"modal","data-bs-target":"#orderDetail",onClick:p=>r.viewDetail(e.contactInfo.contactName)}," 查看明細 ",8,j)])]))),128))])])]),t("div",B,[t("table",E,[T,t("tbody",null,[(a(!0),n(h,null,b(s.isSendOrder,(e,d)=>(a(),n("tr",{key:d+"order"},[t("td",null,l(e.contactInfo.contactName),1),t("td",null,l(e.contactInfo.contactPhone),1),t("td",null,l(e.contactInfo.contactMail),1),t("td",null,[t("button",{type:"button",class:"btn btn-success text-white","data-bs-toggle":"modal","data-bs-target":"#orderDetail",onClick:p=>r.viewDetail(e.contactInfo.contactName)}," 查看明細 ",8,U)])]))),128))])])])]),t("div",A,[t("div",F,[t("div",Q,[R,t("div",z,[G,H,t("div",J,[t("p",K,"訂購人姓名："+l(s.orderDetail.contactInfo.contactName),1),t("p",W,"訂購人電話："+l(s.orderDetail.contactInfo.contactPhone),1)]),t("div",X,[t("p",Y,[i(" 訂購人Mail： "),Z,i(" "+l(s.orderDetail.contactInfo.contactMail),1)]),t("p",$,[i(" 訂購人地址： "),tt,i(" "+l(s.orderDetail.contactInfo.contactAddress),1)])]),t("div",et,[t("p",ot,[i(" 備註： "),lt,i(" "+l(s.orderDetail.contactInfo.contactNote),1)])]),st,i(" 訂購商品資訊： "),t("table",at,[nt,t("tbody",null,[(a(!0),n(h,null,b(s.orderDetail.orderList,(e,d)=>(a(),n("tr",{key:"buyIt"+d},[t("td",null,l(e.title),1),t("td",null,l(e.qty),1),t("td",null,l(e.price),1),t("td",null,l(e.qty*e.price),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",ct,"總共 "+l(r.totalQty)+" 件商品",1),t("td",dt,"金額共計 "+l(r.totalPrice)+" 元",1)])])]),it,t("div",rt,[t("div",ht,[t("div",ut,[f(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.orderDetail.isPay=e),class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault"},null,512),[[y,s.orderDetail.isPay]]),bt])]),t("div",_t,[t("div",ft,[s.orderDetail.isPay?f((a(),n("input",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>s.orderDetail.isSend=e),class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault"},null,512)),[[y,s.orderDetail.isSend]]):f((a(),n("input",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>s.orderDetail.isSend=e),class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",disabled:""},null,512)),[[y,s.orderDetail.isSend]]),yt])])])]),t("div",pt,[vt,t("button",{onClick:o[3]||(o[3]=e=>r.uploadOrder()),type:"button",class:"btn btn-primary text-white","data-bs-dismiss":"modal"},"更新訂單進度")])])])])],64)}const gt=g(x,[["render",mt]]);export{gt as default};
